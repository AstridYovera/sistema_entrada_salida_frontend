<div class="container">
    <form id="idFormAutor" [formGroup]="formsRegistra">
        <div class="row">
            <mat-toolbar color="primary">
                <span>Registra Autor</span>
            </mat-toolbar>
        </div>
        <hr>
        <div class="row" style="margin-top: 3%">
            <mat-form-field class="col-md-4" [ngClass]="{'campo-error': autorExistente}">
                <mat-label>Nombre</mat-label>
                <input matInput [(ngModel)]="autor.nombres" formControlName="validaNombres">
                <mat-hint style="color: red" *ngIf="formsRegistra.controls.validaNombres.touched">
                    <span *ngIf="formsRegistra.controls.validaNombres.hasError('required')">
                        El nombre es requerido
                    </span>
                    <span *ngIf="formsRegistra.controls.validaNombres.hasError('pattern')">
                        El nombre es de 4 a 40 caracteres     
                    </span>
                    <span *ngIf="formsRegistra.controls.validaNombres.hasError('autorExistente')">
                        El Nombre ya existe
                    </span>
                </mat-hint>
            </mat-form-field>

            <mat-form-field class="col-md-4" [ngClass]="{'campo-error': autorExistente}">
                <mat-label>Apellidos</mat-label>
                <input matInput [(ngModel)]="autor.apellidos" formControlName="validaApellidos">
                <mat-hint style="color: red" *ngIf="formsRegistra.controls.validaApellidos.touched">
                    <span *ngIf="formsRegistra.controls.validaApellidos.hasError('required')">
                        El apellido es requerido
                    </span>
                    <span *ngIf="formsRegistra.controls.validaApellidos.hasError('pattern')">
                        El apellido es de 4 a 40 caracteres     
                    </span>
                    <span *ngIf="formsRegistra.controls.validaApellidos.hasError('autorExistente')">
                        El Apellido ya existe
                    </span>
                </mat-hint>
            </mat-form-field>

            <mat-form-field class="col-md-4">
                <mat-label>Fecha de Nacimiento</mat-label>
                <input matInput [matDatepicker]="picker" formControlName="validaFechaNacimiento">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
                <mat-hint style="color: red" *ngIf="formsRegistra.controls.validaFechaNacimiento.touched">
                    <span *ngIf="formsRegistra.controls.validaFechaNacimiento.hasError('required')">
                        La fecha de nacimiento es requerido
                    </span>
                    <span *ngIf="formsRegistra.controls.validaFechaNacimiento.hasError('menorEdad')">
                        La persona debe ser mayor de edad.
                    </span>
                </mat-hint>
            </mat-form-field>


            <mat-form-field class="col-md-4" [ngClass]="{'campo-error': autorExistente}">
                <mat-label>Teléfono</mat-label>
                <input matInput [(ngModel)]="autor.telefono" formControlName="validaTelefono">
                <mat-hint style="color: red" *ngIf="formsRegistra.controls.validaTelefono.touched">
                    <span *ngIf="formsRegistra.controls.validaTelefono.hasError('required')">
                        El teléfono es requerido
                    </span>
                    <span *ngIf="formsRegistra.controls.validaTelefono.hasError('pattern')">
                        Teléfono es de 9 dígitos, '018XXXXXX'
                    </span>
                    <span *ngIf="formsRegistra.controls.validaTelefono.hasError('autorExistente')">
                        El teléfono ya existe
                    </span>
                </mat-hint>
            </mat-form-field>

            <mat-form-field class="col-md-4" [ngClass]="{'campo-error': autorExistente}">
                <mat-label>Celular</mat-label>
                <input matInput [(ngModel)]="autor.celular" formControlName="validaCelular">
                <mat-hint style="color: red" *ngIf="formsRegistra.controls.validaCelular.touched">
                    <span *ngIf="formsRegistra.controls.validaCelular.hasError('required')">
                        El celular es requerido
                    </span>
                    <span *ngIf="formsRegistra.controls.validaCelular.hasError('pattern')">
                        Celular es de 9 dígitos, '9XXXXXXXX'
                    </span>
                    <span *ngIf="formsRegistra.controls.validaCelular.hasError('autorExistente')">
                        El número de celular ya existe
                    </span>
                </mat-hint>
            </mat-form-field>

            <mat-form-field class="col-md-4">
                <mat-label>Orcid</mat-label>
                <input matInput [(ngModel)]="autor.orcid" formControlName="validaOrcid">
                <mat-hint style="color: red" *ngIf="formsRegistra.controls.validaOrcid.touched">
                    <span *ngIf="formsRegistra.controls.validaOrcid.hasError('required')">
                        El orcid es requerido
                    </span>
                    <span *ngIf="formsRegistra.controls.validaOrcid.hasError('pattern')">
                        El orcid es de 16 dígitos con el formato 'XXXX-XXXX-XXXX-XXXX'
                    </span>
                </mat-hint>
            </mat-form-field>

            <mat-form-field class="col-md-4">
                <mat-label>País</mat-label>
                <mat-select [(ngModel)]="autor.pais!.idPais" formControlName="validaPais">
                    <mat-option value="-1"> [Seleccione] </mat-option>
                    <mat-option *ngFor="let x of lstPais" [value]="x.idPais">
                        {{x.nombre}}
                    </mat-option>
                </mat-select>
                <mat-hint style="color: red" *ngIf="formsRegistra.controls.validaPais.touched">
                    <span *ngIf="formsRegistra.controls.validaPais.hasError('min')">
                        El país es requerido
                    </span>
                </mat-hint>
            </mat-form-field>

            <mat-form-field class="col-md-4">
                <mat-label>Grado</mat-label>
                <mat-select [(ngModel)]="autor.grado!.idDataCatalogo" formControlName="validaGrado">
                    <mat-option value="-1"> [Seleccione] </mat-option>
                    <mat-option *ngFor="let x of lstGrado" [value]="x.idDataCatalogo">
                        {{x.descripcion}}
                    </mat-option>
                </mat-select>
                <mat-hint style="color: red" *ngIf="formsRegistra.controls.validaGrado.touched">
                    <span *ngIf="formsRegistra.controls.validaGrado.hasError('min')">
                        El grado es requerido
                    </span>
                </mat-hint>
            </mat-form-field>

        </div>
        <hr>

        <div class="row">
            <button mat-raised-button type="submit" [disabled]="formsRegistra.invalid" color="primary"
                (click)="registra()">Registra</button>
            <button mat-button color="primary" [mat-dialog-close]="0">
                Salir
            </button>
        </div>
    </form>
</div>